
<!DOCTYPE html>
<html>
<head>
	<title>Lost and Found</title>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
    #sandbox p {
      display: inline; padding: 5px; margin-right: 5px; background: lightgrey;
    }
    div.results{
    }
  </style>
</head>
<body>
  <div class='container'>
    <div class='row'>
      <div class='col-md-12'>
        <h1> Lost and Found in the MTA </h1>
      </div>
    </div>
    <div class='row'>
      <div class='col-md-12 results'>
        SHITSTACK
      </div>
    </div>
  </div>
</body>
<script src="https://code.jquery.com/jquery-2.1.4.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script>
$(document).ready(function() {

  var data = {
    'name' : 'data',
    'cats' : []
  };

  function parseXML(xml){
    $(xml).find("Category").each(function(){
      var cat = {
        'name' : $(this).attr('Category'),
        'data' : []
      };
      $(this).find("SubCategory").each(function(){
        var subcat = {
          'name' : $(this).attr('SubCategory'),
          'count' : $(this).attr('count')
        };
        cat['data'].push(subcat);
      });
      data['cats'].push(cat);
    });
  };

  $.ajax({
    type: "POST",
    url: "http://jbuckland.com/bounce.php",
    data: "{}",
    contentType: "application/xml; charset=utf-8",
    dataType: "xml",
    success: parseXML
  })
  .done(function()    {
    $("#sandbox").append( "<p>Second Success.</p>"  );

    console.log(data);

    var cats = data['cats'];

    console.log(cats);

  })
  .fail(function()    { $("#sandbox").append( "<p>Error!</p>"           ); })
  .always(function()  { $("#sandbox").append( "<p>Finished.</p>"        ); });


});
</script>
</html>
